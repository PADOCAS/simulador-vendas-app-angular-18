import{a as U}from"./chunk-UOGOKI55.js";import{B as V,D as j,E as O,F as P,G as H,e as x,fa as J,g as N,ga as K,ha as Q,k as I,l as p,m as M,n as T,o as y,p as A,q as D,r as z,s as L,t as q,u as k,w as G,x as w,y as B,z as R}from"./chunk-ONO6SFO6.js";import{h as _}from"./chunk-LQOFRPB3.js";import{Db as t,Eb as e,Fb as d,Mb as E,Yb as o,Za as m,_a as v,ac as b,d as S,ka as g,sb as u,t as F,ub as c,zb as s}from"./chunk-DQCAUZTF.js";function W(r,l){r&1&&(t(0,"div")(1,"mat-form-field",17)(2,"mat-label"),o(3,"Id"),e(),d(4,"input",18),e()())}function X(r,l){r&1&&(t(0,"mat-error"),o(1,"Raz\xE3o Social \xE9 "),t(2,"strong"),o(3,"requerida"),e()())}function Y(r,l){r&1&&(t(0,"mat-error"),o(1,"Raz\xE3o Social deve ter no m\xEDnimo 3 caracteres"),e())}function Z(r,l){r&1&&(t(0,"mat-error"),o(1,"Nome Fantasia \xE9 "),t(2,"strong"),o(3,"requerida"),e()())}function $(r,l){r&1&&(t(0,"mat-error"),o(1,"Nome Fantasia deve ter no m\xEDnimo 3 caracteres"),e())}function ee(r,l){r&1&&(t(0,"mat-error"),o(1,"T\xEDtulo Contato \xE9 "),t(2,"strong"),o(3,"requerido"),e()())}function te(r,l){r&1&&(t(0,"mat-error"),o(1,"T\xEDtulo Contato deve ter no m\xEDnimo 3 caracteres"),e())}function oe(r,l){r&1&&(t(0,"mat-error"),o(1," O CEP deve estar no formato "),t(2,"strong"),o(3,"#####-###"),e(),o(4,". "),e())}function re(r,l){r&1&&(t(0,"mat-error"),o(1," O Celular deve estar no formato "),t(2,"strong"),o(3,"(##) #####-####"),e(),o(4,". "),e())}var Ee=(()=>{let l=class l{constructor(n,i,a,f){this.fornecedoresService=n,this.form=i,this.router=a,this.routeActive=f,this.showLoading=!1,this.fornecedorForm=this.form.group({id:[null],razaoSocial:["",[p.required,p.minLength(3)]],tituloContato:["",[p.required,p.minLength(3)]],nomeFantasia:["",[p.required,p.minLength(3)]],endereco:this.form.group({rua:[""],cidade:[""],bairro:[""],cep:[null],pais:[""],telefone:[""]})})}ngOnInit(){this.routeActive!==void 0&&this.routeActive!==null&&this.routeActive.snapshot!==void 0&&this.routeActive.snapshot!==null&&this.routeActive.snapshot.paramMap!==void 0&&this.routeActive.snapshot.paramMap!==null&&this.routeActive.snapshot.paramMap.get("id")!==void 0&&this.routeActive.snapshot.paramMap.get("id")!==null&&this.fornecedoresService.pegar(Number(this.routeActive.snapshot.paramMap.get("id"))).subscribe(n=>{if(n!=null){let i=n;this.fornecedorForm.setValue({id:i.id,razaoSocial:i.razaoSocial,tituloContato:i.tituloContato,nomeFantasia:i.nomeFantasia,endereco:{rua:i.endereco?.rua||null,cidade:i.endereco?.cidade||null,cep:i.endereco?.cep||null,bairro:i.endereco?.bairro||null,pais:i.endereco?.pais||null,telefone:i.endereco?.telefone||null}}),this.fornecedorForm.get("id")?.disable()}})}onSubmit(){console.log("Submit",this.fornecedorForm.value),this.onSave(this.convertFormBuilderGroupToFornecedor())}convertFormBuilderGroupToFornecedor(){this.fornecedorForm.get("id")?.enable();let n=this.fornecedorForm.value;return this.fornecedorForm.get("id")?.disable(),{id:n.id??0,razaoSocial:n.razaoSocial||"",tituloContato:n.tituloContato||"",nomeFantasia:n.nomeFantasia||"",endereco:{rua:n.endereco?.rua||null,cidade:n.endereco?.cidade||null,cep:n.endereco?.cep||null,bairro:n.endereco?.bairro||null,pais:n.endereco?.pais||null,telefone:n.endereco?.telefone||null}}}onSave(n){return S(this,null,function*(){this.showLoading=!0;let i=yield F(this.fornecedoresService.salvar(n));console.log("Fornecedor salvo: ",i),this.showLoading=!1,this.router.navigate(["/fornecedores"])})}cancelar(){this.router.navigate(["/fornecedores"])}};l.\u0275fac=function(i){return new(i||l)(v(U),v(L),v(N),v(x))},l.\u0275cmp=g({type:l,selectors:[["app-cad-fornecedor"]],standalone:!0,features:[b],decls:64,vars:14,consts:[["novalidate","",3,"ngSubmit","formGroup"],[4,"ngIf"],[1,"container"],[1,"item"],["matInput","","formControlName","razaoSocial"],["matInput","","formControlName","nomeFantasia"],["matInput","","formControlName","tituloContato"],["formGroupName","endereco",1,"container"],["matInput","","formControlName","rua"],["matInput","","formControlName","cidade"],["matInput","","formControlName","bairro"],["matInput","","formControlName","pais"],["matInput","","formControlName","cep","mask","00000-000",3,"dropSpecialCharacters"],["matInput","","formControlName","telefone","mask","(00) 00000-0000",3,"dropSpecialCharacters"],["mat-raised-button","","color","primary","type","submit",2,"margin-right","8px !important","margin-bottom","16px !important",3,"disabled"],["type","button","mat-raised-button","","color","primary",2,"margin-bottom","16px !important",3,"click"],[3,"visible"],[1,"item-20"],["matInput","","formControlName","id"]],template:function(i,a){if(i&1&&(t(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),o(3,"Fornecedor"),e()(),t(4,"mat-card-content")(5,"form",0),E("ngSubmit",function(){return a.onSubmit()}),t(6,"div"),u(7,W,5,0,"div",1),t(8,"div",2)(9,"mat-form-field",3)(10,"mat-label"),o(11,"Raz\xE3o Social"),e(),d(12,"input",4),u(13,X,4,0,"mat-error")(14,Y,2,0,"mat-error"),e()(),t(15,"div",2)(16,"mat-form-field",3)(17,"mat-label"),o(18,"Nome Fantasia"),e(),d(19,"input",5),u(20,Z,4,0,"mat-error")(21,$,2,0,"mat-error"),e(),t(22,"mat-form-field",3)(23,"mat-label"),o(24,"T\xEDtulo Contato"),e(),d(25,"input",6),u(26,ee,4,0,"mat-error")(27,te,2,0,"mat-error"),e()(),t(28,"mat-card-subtitle"),o(29,"Endere\xE7o"),e(),t(30,"div",7)(31,"mat-form-field",3)(32,"mat-label"),o(33,"Logradouro"),e(),d(34,"input",8),e()(),t(35,"div",7)(36,"mat-form-field",3)(37,"mat-label"),o(38,"Cidade"),e(),d(39,"input",9),e(),t(40,"mat-form-field",3)(41,"mat-label"),o(42,"Bairro"),e(),d(43,"input",10),e(),t(44,"mat-form-field",3)(45,"mat-label"),o(46,"Pa\xEDs"),e(),d(47,"input",11),e()(),t(48,"div",7)(49,"mat-form-field",3)(50,"mat-label"),o(51,"CEP"),e(),d(52,"input",12),u(53,oe,5,0,"mat-error",1),e(),t(54,"mat-form-field",3)(55,"mat-label"),o(56,"Celular"),e(),d(57,"input",13),u(58,re,5,0,"mat-error",1),e()()(),t(59,"button",14),o(60," Salvar "),e(),t(61,"button",15),E("click",function(){return a.cancelar()}),o(62," Cancelar "),e()()(),d(63,"app-loading-bar",16),e()),i&2){let f,C,h;m(5),c("formGroup",a.fornecedorForm),m(2),c("ngIf",((f=a.fornecedorForm.get("id"))==null?null:f.value)!==null),m(6),s(a.fornecedorForm.controls.razaoSocial.hasError("required")?13:-1),m(),s(a.fornecedorForm.controls.razaoSocial.hasError("minlength")?14:-1),m(6),s(a.fornecedorForm.controls.nomeFantasia.hasError("required")?20:-1),m(),s(a.fornecedorForm.controls.nomeFantasia.hasError("minlength")?21:-1),m(5),s(a.fornecedorForm.controls.tituloContato.hasError("required")?26:-1),m(),s(a.fornecedorForm.controls.tituloContato.hasError("minlength")?27:-1),m(25),c("dropSpecialCharacters",!1),m(),c("ngIf",((C=a.fornecedorForm.get("endereco.cep"))==null?null:C.hasError("mask"))&&((C=a.fornecedorForm.get("endereco.cep"))==null?null:C.touched)),m(4),c("dropSpecialCharacters",!1),m(),c("ngIf",((h=a.fornecedorForm.get("endereco.telefone"))==null?null:h.hasError("mask"))&&((h=a.fornecedorForm.get("endereco.telefone"))==null?null:h.touched)),m(),c("disabled",!a.fornecedorForm.valid),m(4),c("visible",a.showLoading)}},dependencies:[q,y,I,M,T,A,z,D,K,k,H,P,j,O,G,B,V,R,w,J,_,Q]});let r=l;return r})();export{Ee as CadFornecedorComponent};
