import{a as K}from"./chunk-2FFXL3KZ.js";import{B,D as R,E as V,F as j,G as P,e as b,fa as H,g as _,ga as O,ha as J,k as x,l as s,m as N,n as M,o as I,p as T,q as y,r as A,s as D,t as z,u as L,w as q,x as G,y as k,z as w}from"./chunk-URQ2MXAB.js";import{Bb as t,Cb as e,Db as d,Kb as C,Wb as o,Xa as l,Ya as f,_b as F,d as h,ja as E,qb as v,sb as c,t as S,xb as u,zc as g}from"./chunk-YZ7S2QAI.js";function Q(n,m){n&1&&(t(0,"div")(1,"mat-form-field",17)(2,"mat-label"),o(3,"Id"),e(),d(4,"input",18),e()())}function U(n,m){n&1&&(t(0,"mat-error"),o(1,"Raz\xE3o Social \xE9 "),t(2,"strong"),o(3,"requerida"),e()())}function W(n,m){n&1&&(t(0,"mat-error"),o(1,"Raz\xE3o Social deve ter no m\xEDnimo 3 caracteres"),e())}function X(n,m){n&1&&(t(0,"mat-error"),o(1,"Nome Fantasia \xE9 "),t(2,"strong"),o(3,"requerida"),e()())}function Y(n,m){n&1&&(t(0,"mat-error"),o(1,"Nome Fantasia deve ter no m\xEDnimo 3 caracteres"),e())}function Z(n,m){n&1&&(t(0,"mat-error"),o(1,"T\xEDtulo Contato \xE9 "),t(2,"strong"),o(3,"requerido"),e()())}function $(n,m){n&1&&(t(0,"mat-error"),o(1,"T\xEDtulo Contato deve ter no m\xEDnimo 3 caracteres"),e())}var fe=(()=>{let m=class m{constructor(r,i,a,p){this.fornecedoresService=r,this.form=i,this.router=a,this.routeActive=p,this.showLoading=!1,this.fornecedorForm=this.form.group({id:[null],razaoSocial:["",[s.required,s.minLength(3)]],tituloContato:["",[s.required,s.minLength(3)]],nomeFantasia:["",[s.required,s.minLength(3)]],endereco:this.form.group({rua:[""],cidade:[""],bairro:[""],cep:[null],pais:[""],telefone:[""]})})}ngOnInit(){this.routeActive!==void 0&&this.routeActive!==null&&this.routeActive.snapshot!==void 0&&this.routeActive.snapshot!==null&&this.routeActive.snapshot.paramMap!==void 0&&this.routeActive.snapshot.paramMap!==null&&this.routeActive.snapshot.paramMap.get("id")!==void 0&&this.routeActive.snapshot.paramMap.get("id")!==null&&this.fornecedoresService.pegar(Number(this.routeActive.snapshot.paramMap.get("id"))).subscribe(r=>{if(r!=null){let i=r;this.fornecedorForm.setValue({id:i.id,razaoSocial:i.razaoSocial,tituloContato:i.tituloContato,nomeFantasia:i.nomeFantasia,endereco:{rua:i.endereco?.rua||null,cidade:i.endereco?.cidade||null,cep:i.endereco?.cep||null,bairro:i.endereco?.bairro||null,pais:i.endereco?.pais||null,telefone:i.endereco?.telefone||null}}),this.fornecedorForm.get("id")?.disable()}})}onSubmit(){console.log("Submit",this.fornecedorForm.value),this.onSave(this.convertFormBuilderGroupToFornecedor())}convertFormBuilderGroupToFornecedor(){this.fornecedorForm.get("id")?.enable();let r=this.fornecedorForm.value;return this.fornecedorForm.get("id")?.disable(),{id:r.id??0,razaoSocial:r.razaoSocial||"",tituloContato:r.tituloContato||"",nomeFantasia:r.nomeFantasia||"",endereco:{rua:r.endereco?.rua||null,cidade:r.endereco?.cidade||null,cep:r.endereco?.cep||null,bairro:r.endereco?.bairro||null,pais:r.endereco?.pais||null,telefone:r.endereco?.telefone||null}}}onSave(r){return h(this,null,function*(){this.showLoading=!0;let i=yield S(this.fornecedoresService.salvar(r));console.log("Fornecedor salvo: ",i),this.showLoading=!1,this.router.navigate(["/fornecedores"])})}cancelar(){this.router.navigate(["/fornecedores"])}};m.\u0275fac=function(i){return new(i||m)(f(K),f(D),f(_),f(b))},m.\u0275cmp=E({type:m,selectors:[["app-cad-fornecedor"]],standalone:!0,features:[F],decls:62,vars:12,consts:[["novalidate","",3,"ngSubmit","formGroup"],[4,"ngIf"],[1,"container"],[1,"item"],["matInput","","formControlName","razaoSocial"],["matInput","","formControlName","nomeFantasia"],["matInput","","formControlName","tituloContato"],["formGroupName","endereco",1,"container"],["matInput","","formControlName","rua"],["matInput","","formControlName","cidade"],["matInput","","formControlName","bairro"],["matInput","","formControlName","pais"],["matInput","","formControlName","cep","mask","00000-000",3,"dropSpecialCharacters"],["matInput","","formControlName","telefone","mask","(00) 00000-0000",3,"dropSpecialCharacters"],["mat-raised-button","","color","primary","type","submit",2,"margin-right","8px !important","margin-bottom","16px !important",3,"disabled"],["type","button","mat-raised-button","","color","primary",2,"margin-bottom","16px !important",3,"click"],[3,"visible"],[1,"item-20"],["matInput","","formControlName","id"]],template:function(i,a){if(i&1&&(t(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),o(3,"Fornecedor"),e()(),t(4,"mat-card-content")(5,"form",0),C("ngSubmit",function(){return a.onSubmit()}),t(6,"div"),v(7,Q,5,0,"div",1),t(8,"div",2)(9,"mat-form-field",3)(10,"mat-label"),o(11,"Raz\xE3o Social"),e(),d(12,"input",4),v(13,U,4,0,"mat-error")(14,W,2,0,"mat-error"),e()(),t(15,"div",2)(16,"mat-form-field",3)(17,"mat-label"),o(18,"Nome Fantasia"),e(),d(19,"input",5),v(20,X,4,0,"mat-error")(21,Y,2,0,"mat-error"),e(),t(22,"mat-form-field",3)(23,"mat-label"),o(24,"T\xEDtulo Contato"),e(),d(25,"input",6),v(26,Z,4,0,"mat-error")(27,$,2,0,"mat-error"),e()(),t(28,"mat-card-subtitle"),o(29,"Endere\xE7o"),e(),t(30,"div",7)(31,"mat-form-field",3)(32,"mat-label"),o(33,"Logradouro"),e(),d(34,"input",8),e()(),t(35,"div",7)(36,"mat-form-field",3)(37,"mat-label"),o(38,"Cidade"),e(),d(39,"input",9),e(),t(40,"mat-form-field",3)(41,"mat-label"),o(42,"Bairro"),e(),d(43,"input",10),e(),t(44,"mat-form-field",3)(45,"mat-label"),o(46,"Pa\xEDs"),e(),d(47,"input",11),e()(),t(48,"div",7)(49,"mat-form-field",3)(50,"mat-label"),o(51,"CEP"),e(),d(52,"input",12),e(),t(53,"mat-form-field",3)(54,"mat-label"),o(55,"Celular"),e(),d(56,"input",13),e()()(),t(57,"button",14),o(58," Salvar "),e(),t(59,"button",15),C("click",function(){return a.cancelar()}),o(60," Cancelar "),e()()(),d(61,"app-loading-bar",16),e()),i&2){let p;l(5),c("formGroup",a.fornecedorForm),l(2),c("ngIf",((p=a.fornecedorForm.get("id"))==null?null:p.value)!==null),l(6),u(a.fornecedorForm.controls.razaoSocial.hasError("required")?13:-1),l(),u(a.fornecedorForm.controls.razaoSocial.hasError("minlength")?14:-1),l(6),u(a.fornecedorForm.controls.nomeFantasia.hasError("required")?20:-1),l(),u(a.fornecedorForm.controls.nomeFantasia.hasError("minlength")?21:-1),l(5),u(a.fornecedorForm.controls.tituloContato.hasError("required")?26:-1),l(),u(a.fornecedorForm.controls.tituloContato.hasError("minlength")?27:-1),l(25),c("dropSpecialCharacters",!1),l(4),c("dropSpecialCharacters",!1),l(),c("disabled",!a.fornecedorForm.valid),l(4),c("visible",a.showLoading)}},dependencies:[z,I,x,N,M,T,A,y,O,L,P,j,R,V,q,k,B,w,G,H,g,J]});let n=m;return n})();export{fe as CadFornecedorComponent};
